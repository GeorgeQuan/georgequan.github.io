分离轴算法（Separating Axis Theorem，简称SAT）是一种常用于检测凸多边形之间是否存在碰撞的算法。该算法可以应用于以下类型的图形：

1. 凸多边形：凸多边形是指其所有内角都小于180度的多边形。SAT可以用于检测凸多边形与凸多边形之间的碰撞。
    
2. 圆形：圆形是一个特殊的凸形状，可以近似为一个无限边数的凸多边形。SAT可以用于检测圆形与凸多边形之间的碰撞。
    
3. 矩形：矩形是一种特殊的凸多边形，具有四个直角。SAT可以用于检测矩形与凸多边形之间的碰撞。
    
4. 线段：线段可以看作是只有两个端点的矩形，也可以近似为一个无限边数的凸多边形。SAT可以用于检测线段与凸多边形之间的碰撞。
    

需要注意的是，SAT算法适用于凸形状之间的碰撞检测。对于非凸形状（如凹多边形）或复杂形状（如曲线），SAT可能不适用或需要进一步的处理和逼近。

此外，SAT算法也可以用于其他类型的碰撞检测，如球体与凸多边形之间的碰撞、盒子与凸多边形之间的碰撞等。算法的基本原理是通过检测形状之间是否存在分离轴（即能够将形状分开的轴），从而判断形状是否相交。

首先我们如何判断一个多边形的凸多边形还是凹多边形,首先把所有的点连接起来形成一个多边形,然后从线中任意取两个点连接起来,如果连接的线段在多边行内那么它就是一个凸多边形.反之如果又线在多边形外那么它就是一个凹多边形.
#凸多边形
1. 没有凹角：凸多边形的所有内角都小于180度，没有凹角存在。内角是多边形内部两条边之间的夹角，凸多边形内角的总和始终是小于360度的。
2. 简化的碰撞检测：由于凸多边形没有凹角，因此碰撞检测算法（如分离轴定理）在处理凸多边形之间的碰撞时相对简化。
#凹多边形
1. 凹角存在：凹多边形至少有一个凹角，即一个顶点的内角大于180度。这意味着在多边形的某个地方，边界会凹陷或折返。
    
2. 内角和大于360度：由于存在至少一个内角大于180度，凹多边形的所有内角之和将大于360度。例如，一个有一个内角为200度的凹多边形，其内角和将大于360度。
    
3. 非凸顶点存在：凹多边形可能有一个或多个非凸顶点，即顶点的内角大于180度。这些非凸顶点使得多边形的某些部分向内凹陷。
    
4. 边界不连续：由于凹角的存在，凹多边形的边界在凹角处不再连续。边界会在凹角处出现折返或凹陷。
    
5. 碰撞检测复杂：由于凹多边形的形状复杂性，对凹多边形之间的碰撞进行检测和处理相对复杂。通常需要更复杂的算法来处理凹多边形之间的碰撞。
## 凸多边形与凸多边形的碰撞

凸多边形是指在多边形中任意取两点，将两点连线，产生一条线段，如果线段完整的处在多边形内，那么就是凸多边形，如果线段有部分处于多边形外，就属于凹多边形。 这里先讨论凸多边形。

凸多边形的碰撞判断方式是分离轴定理。 指的是将一个凸n边形取每条边的法向量，可以得到n条法向量，那么两个凸n边形就能得到2n条法向量，我们将两个图形投影到每条法向量上，在每条法向量上将得到两条线段，如果没条法向量上的线段都有重合部分，那么就认定凸多边形相互碰撞了。反之，则没有碰撞。6

![](https://pic2.zhimg.com/80/v2-0d9b758514251a95b9d72a89ad956fdd_1440w.webp)
法向量:垂直在多边形的边上的向量就是这条线的法向量
我们首先找出所有边的法向量,这就是分离轴算法的轴.然后我们假设有光从法向量的上方投射到轴上,我们能看到在轴上会显示两个多边形的阴影.如果所有的阴影都发生了重合,那么说明两个多边形发生了碰撞.只要有一个轴上面的阴影没有重合那么就说明这两个多边形没有发生碰撞.
相当于你无论从哪个方向来看这两个3D物体,他们两个中永远都没有一条<<直线>>是把他们两个分开的.


当凸多边形与凹多边形发生碰撞的时候
![[Pasted image 20240223101242.png]]
如图所示,虽然他们两个的阴影都发生了重叠,但是我们可以清除的看到这两个图形并没有发生碰撞.
但我们可以用分离轴算法的拓展来实现它.如果我们把一个凹多边形,分解成两个凸多边形(把中间的两个顶点连接起来),我们同样可以用分离轴算法来计算他们是否重合
拆分非凸多边形可以使用多边形剖分算法，如耳切割算法（Ear Clipping Algorithm）或三角剖分算法（Triangulation Algorithm）。这些算法将非凸多边形切割成多个凸多边形或三角形，使得每个子形状都是凸的，然后分别进行碰撞检测。消耗性能!!! 能不用凹多边形就不用


在Unity中，判断将要碰撞的两个物体的形状并选择合适的碰撞检测算法是由Unity的碰撞检测系统来处理的。下面是一般的工作流程：

1. 物体形状的表示：每个物体在Unity中都有一个对应的碰撞体组件（Collider Component），用于表示物体的形状。Unity提供了多种碰撞体类型，如凸多边形（Mesh Collider）、球体（Sphere Collider）、胶囊体（Capsule Collider）、盒子（Box Collider）等。开发者可以根据物体的形状选择适当的碰撞体类型，并将其附加到物体上。
    
2. 碰撞体的配置：碰撞体组件还可以进行配置，例如设置碰撞体的大小、位置、旋转等参数，以使其与物体的形状相匹配。
    
3. 碰撞检测算法的选择：Unity的碰撞检测系统会根据物体的碰撞体类型来选择合适的碰撞检测算法。不同的碰撞体类型可能会使用不同的算法来进行碰撞检测。例如，凸多边形（Mesh Collider）可能使用SAT算法、球体（Sphere Collider）可能使用球体碰撞算法等。
    
4. 碰撞检测的触发：在每一帧更新中，Unity的碰撞检测系统会检查所有具有碰撞体组件的物体，并确定哪些物体可能会发生碰撞。系统会根据物体的形状和配置，使用相应的碰撞检测算法进行碰撞检测。
    
5. 碰撞事件的处理：一旦发现发生了碰撞，Unity会触发相应的碰撞事件，开发者可以通过编写脚本来处理这些事件，例如执行碰撞反应、播放声音或触发特定的游戏逻辑等。
    

需要注意的是，Unity的碰撞检测系统是高度优化的，并且使用了多种技术和算法来提供高性能的碰撞检测。具体的实现细节是Unity引擎的内部机密，并不对外公开。
