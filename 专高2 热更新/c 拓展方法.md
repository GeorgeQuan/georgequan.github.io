简介:为现有的非静态类型添加新方法,没有源码的类型也可以添加新的方法,密封类也可以添加新方法(也就是不能继承的类型)总之扩展方法就是不修改类型源代码也不用继承,添加新方法

当我们要给一个类型添加扩展方法的时候首先我们需要一个静态类.它的名字可以是任意的,其次就是在里面写对应的扩展方法了
[[lua调用csharp]] 上面讲了为什么这里的参数可以省略
如果你想给拓展方法添加参数,直接在参数列表后面,(数据类型 参数),(数据类型 参数) 就好了
 ```c#
 public static class MyExtensions
 {
	扩展方法的第一个参数要是扩展的类,必须用this修辞
	public static void Print(this string str)
	{
	 Console.WriteLine(str);
	}
	这样我就为string类型添加了一个扩展方法
	它可以通过以下代码实现
	string a='aaa';
	a.print();//打印
	同样你也可以用它本身来调用这个方法
	MyExtensions.Print(a);//这样也可以使用这个方法
 }
```
再比如我要给double类型添加一个ToInt的扩展方法
```c#
 //注意这个方法要写在静态类中
public static int ToInt(this double x)
{
	return ConVert.ToInt32(x)
}
//这里我给double类型写了一个double转int类型的方法,它会返回给我们一个int类型的数据
// 我们可以想这样来使用这个方法
 Console.WriteLine((3.14).ToInt());
 //这样就可以成功输出ToInt的数了
```
在c#中有很多自带的扩展方法,在使用他们是要注意的是
1. 注意扩展方法的名字习惯在扩展方法的名字后写给后缀Ex
2. 如果在这个类中有同样的方法名与我们自定义的方法名重复的话,会调用系统自带的方法.
3. 扩展方法虽好,但不要滥用,尽可能不要在继承链的上方扩展方法,因为这可能造成很多不需要这个方法的派生类也添加了这个方法,造成方法污染.
以下是具体注意事项
![[Pasted image 20231218140910.png]]