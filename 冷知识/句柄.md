句柄在操作系统中是一种抽象的标识符，用于引用由操作系统管理的资源，如文件、窗口、进程等。句柄本质上是一个整数值，它不直接指向资源的内存地址，而是作为一个索引，通过句柄表（Handle Table）来查找对应的资源的实际地址。句柄的使用使得应用程序可以以一种抽象的方式来操作这些资源，而无需知道资源的具体内存地址或其他底层细节。

在 Windows 操作系统中，句柄的定义和使用非常广泛。例如，`Winnt.h` 头文件中定义了通用句柄（`HANDLE`），以及一些特殊的句柄，如 `HFONT`、`HICON`、`HMETAFILE` 等，这些句柄分别用于引用不同的资源类型。这些句柄的定义允许开发者以一种统一的方式来操作不同类型的资源。

句柄的使用场景非常丰富，包括但不限于：

- **文件操作**：通过句柄可以打开、关闭、读取、写入文件等操作。例如，使用 `GlobalAlloc` 函数分配内存，并通过句柄来锁定和解锁内存区域进行数据操作。这种方式允许开发者以一种简洁的方式来管理内存和数据。

- **进程间通信**：句柄可以在进程间传递，允许一个进程通过句柄来访问另一个进程的资源。这种机制支持跨进程的资源共享和协同工作。

- **窗口和用户界面元素**：在 GUI 应用中，句柄用于引用窗口、控件等 UI 元素，允许开发者通过句柄来操作这些元素。

- **内存管理**：句柄也用于管理内存，尤其是在需要动态分配和释放内存的情况下。通过句柄，操作系统可以跟踪每个资源的生命周期，确保资源的正确使用和释放。

总之，句柄是一种强大的工具，它通过提供一种抽象的、安全的、动态的资源访问方式，为应用程序提供了方便、高效、安全的资源操作能力。句柄的使用不仅适用于Windows操作系统，也在其他操作系统中有类似的概念，如Unix/Linux中的文件描述符。

### 句柄表
句柄表（Handle Table）是一种数据结构，用于存储操作系统中所有句柄的映射关系。句柄本质上是一个整数值，它不直接指向资源的内存地址，而是作为一个索引，通过句柄表来查找对应的资源的实际地址。这种设计使得句柄能够提供更灵活和安全的资源访问方式，同时也提高了系统对资源管理的控制能力。

句柄表的基本工作原理如下：

- 当一个资源被请求时，操作系统会为该资源分配一个唯一的句柄值。
- 这个句柄值被存储在句柄表中，关联到相应的资源。
- 当应用程序通过句柄来访问资源时，操作系统会首先查找句柄表，将句柄值转换为对应的资源地址。
- 一旦找到资源地址，操作系统就可以将请求转发给相应的资源进行处理。

句柄表的使用确保了资源的安全访问，因为只有拥有正确句柄值的应用程序才能访问到相应的资源。此外，句柄表还允许操作系统动态地管理资源的生命周期，包括创建、销毁、移动等操作。

虽然句柄表的具体实现细节可能因操作系统而异，但其核心功能——通过句柄值查找资源地址的能力，是所有现代操作系统中都存在的一种资源管理机制。这种机制不仅提高了系统的效率和资源利用率，还增强了系统的安全性和稳定性。


当我创建一个非托管对象的时候,unity 中会存储句柄,通过句柄表来找到我要操作的定西从而进行操作.

