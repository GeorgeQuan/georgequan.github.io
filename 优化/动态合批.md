如何启用动态合批,Edit->ProjectSettings->Player->Other>DynamicBatching 勾上后就可以动态进行滚动态合批了.
Unity会在每帧进行动态合批。动态合批是一个在运行时动态处理的过程，每帧都会根据当前场景中的对象状态重新计算需要合批的对象。具体而言，Unity在每帧开始时会检查场景中的所有渲染对象，确定哪些对象可以合批，然后将这些对象的几何数据合并成一个或多个批次，以减少绘制调用的数量。


### 详细过程

1. **场景遍历**：
    
    - 每帧开始时，Unity遍历当前场景中的所有渲染对象。
2. **材质检查**：
    
    - Unity检查每个对象的材质。如果多个对象使用相同的材质且材质属性一致，那么它们就有可能被合批。
3. **顶点数计算**：
    
    - Unity计算这些对象的总顶点数。每个批次的总顶点数不能超过900个顶点。
4. **变换矩阵检查**：
    
    - Unity检查每个对象的变换矩阵（位置、旋转、缩放）。变换不能太复杂，否则会增加合批的难度。
5. **合批**：
    
    - 满足合批条件的对象被合并到一个批次中。Unity将这些对象的几何数据合并，然后在一个绘制调用中提交给GPU进行渲染。

### 动态合批的开销

虽然动态合批可以减少绘制调用的数量，但它也有一些开销：

- **CPU开销**：每帧都需要进行合批计算，会增加CPU的负担。
- **内存开销**：合批过程需要额外的内存来存储合并后的几何数据。

### 优化建议

1. **减少材质数量**：尽量减少场景中的材质种类和数量，使用共享材质，以增加合批的机会。
2. **控制对象规模**：避免大对象（超过300个顶点）参与动态合批，尽量使用小对象。
3. **简化变换**：尽量避免复杂的变换，保持对象的变换矩阵简单。
4. **静态合批和GPU Instancing**：对于静止对象，使用静态合批。对于大量相同的对象，使用GPU Instancing。
### 动态合批触发的具体条件

为了触发动态合批，除了顶点数限制，还需要满足以下条件：

1. **相同材质**：
    
    - 使用相同材质（包括相同的Shader和相同的材质属性）的对象可以合批。
    - 如果材质不同，即使顶点数符合要求，也无法进行动态合批。
2. **简单的变换矩阵**：
    
    - 对象的变换（位置、旋转、缩放）不能过于复杂。简单的变换能够减少CPU的计算开销，有助于合批。
3. **顶点要求**
	  1. **单个对象的顶点数**：每个对象的顶点数不能超过300个。
	  2. **合批后的总顶点数**：合批后的总顶点数不能超过900个。
	
	这些限制是为了确保动态合批的过程在性能上是可控的，因为过多的顶点合并会增加CPU的计算开销。
	当模型的`scale`属性设置为负数时也会影响动态合批