# 深浅拷贝


在Unity中，深复制（Deep Copy）和浅复制（Shallow Copy）是用于描述对象复制过程中的两种不同方式。

浅复制是指创建一个新对象，并将原始对象的字段值复制到新对象中。对于引用类型的字段，浅复制只复制引用而不复制实际对象。因此，新对象和原始对象会引用相同的内存地址，修改其中一个对象的字段可能会影响到另一个对象。

深复制是指创建一个新对象，并将原始对象的字段值复制到新对象中，包括引用类型的字段。对于引用类型的字段，深复制会创建一个新的对象实例，并将其复制到新对象中，而不仅仅是复制引用。这样，新对象和原始对象将拥有彼此独立的内存地址，它们之间的修改互不影响。

在Unity中，默认情况下，当你对一个对象进行复制时，使用的是浅复制。这意味着复制后的对象和原始对象会共享相同的引用类型字段的实例。如果你希望执行深复制，以创建一个完全独立的对象副本，你需要自行实现深复制的逻辑，或者使用Unity提供的相关方法。

例如，在C#中，你可以通过实现ICloneable接口来定义自定义对象的深复制逻辑。在Unity中，还可以使用Object.Instantiate()方法来创建一个对象的深复制副本。

需要注意的是，深复制可能会带来性能消耗，特别是对于复杂的对象结构或包含大量数据的对象。因此，在进行对象复制时，要根据具体情况选择合适的复制方式，以平衡性能和所需的副本行为。

下面是一种方便的深层拷贝的写法在每个数据类中写一个深度拷贝的方法返回一个深度拷贝后的值
![[./_resources/深浅拷贝.resources/unknown_filename.png|194x0]]

Property?.Clone(); 这里是盘判断这个属性是否为空,空的话就不会执行clone方法
下面是它的一个用法
![[./_resources/深浅拷贝.resources/unknown_filename.1.png]]

